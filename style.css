:root{
  --bg-1:#0f172a; --bg-2:#1e1b4b; --bg-3:#312e81;
  --text:#e2e8f0; --muted:#cbd5e1;
  --brand:#6366f1; --brand2:#818cf8;
  --ok:#10b981; --bad:#f43f5e; --warn:#f59e0b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 20% 0%, rgba(99,102,241,.28), transparent 60%),
    radial-gradient(900px 500px at 90% -10%, rgba(16,185,129,.18), transparent 60%),
    linear-gradient(135deg, var(--bg-1) 0%, var(--bg-2) 55%, var(--bg-3) 100%);
  min-height:100vh;
  -webkit-tap-highlight-color: transparent;
}
.app{max-width:min(1000px,94vw);margin:0 auto;padding:clamp(12px,2.5vw,24px)}

/* Header */
.hdr{display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:6px}
.pill{
  width:72px;height:72px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#a78bfa 0%,#4f46e5 45%,#1d1b4a 70%);
  box-shadow:0 0 30px rgba(129,140,248,.55),inset 0 12px 32px rgba(255,255,255,.08);
  animation: pop .9s ease-out both;
}
.hdr-title{
  margin:16px 0 6px;font-size:clamp(28px,6vw,50px);font-weight:900;letter-spacing:.6px;
  background:linear-gradient(90deg,#a5b4fc,#60a5fa,#c4b5fd);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  text-shadow:0 0 22px rgba(129,140,248,.55);
  animation: fadeUp .8s .05s ease-out both;
}
.hdr-sub{margin:0;color:var(--muted);animation: fadeUp .8s .15s ease-out both}

/* Меню */
.menu{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:12px;margin:clamp(16px,3vw,26px) 0 clamp(8px,2vw,18px);
  animation: fadeUp .8s .25s ease-out both
}
.btn{
  width:100%;padding:clamp(12px,2.6vw,14px) clamp(14px,3vw,18px);border-radius:16px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(255,255,255,.06);color:var(--text);
  font-weight:900;font-size:clamp(14px,2.6vw,16px);letter-spacing:.2px;
  cursor:pointer;transition:.18s transform ease,.18s background ease,.18s box-shadow ease,.18s border-color ease;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.1)}
.btn:active{transform: translateY(0)}
.btn-primary{
  background:linear-gradient(90deg,#4f46e5,#6366f1);color:#fff;
  box-shadow:0 18px 40px rgba(99,102,241,.35);
}
.btn-primary:hover{background:linear-gradient(90deg,#6366f1,#818cf8)}
.btn.active{border-color:var(--brand2);box-shadow:0 0 0 2px rgba(129,140,248,.35) inset}

/* Экран (страницы) — фиксированная рамка со СКРОЛЛОМ ВНУТРИ */
.screen{
  position:relative;
  height:clamp(480px,66vh,720px);
  overflow:auto; /* скролл здесь */
  border-radius:20px;border:1px solid rgba(255,255,255,.08);
  background:rgba(255,255,255,.04);
  box-shadow:0 24px 70px rgba(0,0,0,.4);
  scroll-behavior:smooth;
}
.view{
  min-height:100%;
  padding:clamp(12px,2vw,16px);
  opacity:0;transform:translateY(10px);
  animation:viewIn .22s ease forwards;
}
.view.fadeout{animation:viewOut .18s ease forwards}

/* Скроллбар */
.screen::-webkit-scrollbar{width:10px}
.screen::-webkit-scrollbar-track{background:transparent}
.screen::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#4f46e5,#818cf8);border-radius:999px}

/* Контент */
.card{
  border:1px solid rgba(255,255,255,.09);
  background:rgba(255,255,255,.06);
  border-radius:18px;padding:16px;box-shadow:0 24px 70px rgba(0,0,0,.4);
}
.card + .card{margin-top:12px}
.card h3{margin:0 0 8px;font-size:clamp(16px,2.6vw,20px)}
.grid{display:grid;gap:10px}
.grid.two{grid-template-columns:repeat(2,1fr)}
.grid.auto{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}

/* Викторина */
.meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:clamp(12px,2.4vw,13px);margin-bottom:8px}
.badge{display:inline-flex;align-items:center;gap:6px;border:1px solid rgba(255,255,255,.12);padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);font-size:12px;color:#e5e7eb}
.qimg{
  width:100%;
  max-height:clamp(200px,38vh,320px);
  object-fit:contain;
  border-radius:14px;border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.15);margin:8px 0
}

/* Ответы как <button> — стабильные клики в Telegram */
.answer{
  display:block;width:100%;
  padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.08);
  background:rgba(255,255,255,.06);cursor:pointer;transition:.16s ease;
  font-size:clamp(14px,2.6vw,16px);text-align:left;
  position:relative;z-index:1;-webkit-tap-highlight-color:transparent;
}
.answer:hover{background:rgba(255,255,255,.12)}
.answer:disabled{opacity:.85;cursor:default}
.answer.correct{border-color:var(--ok);background:rgba(16,185,129,.12)}
.answer.wrong{border-color:var(--bad);background:rgba(244,63,94,.12)}

/* Списки */
.row{
  display:flex;gap:12px;align-items:center;justify-content:space-between;
  padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.05)
}

/* Toast */
.toast-wrap{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;opacity:0;transition:opacity .25s;z-index:9999}
.toast{background:rgba(15,23,42,.94);border:1px solid rgba(255,255,255,.08);color:#f1f5f9;border-radius:12px;padding:10px 16px;box-shadow:0 18px 60px rgba(0,0,0,.45)}

/* Лоадер */
.loader{position:fixed;inset:0;display:grid;place-items:center;z-index:99999}
.loader.hidden{display:none}
.loader-bg{
  position:absolute;inset:0;
  background:
    radial-gradient(900px 400px at 10% -10%, rgba(99,102,241,.25), transparent 60%),
    radial-gradient(900px 400px at 90% 110%, rgba(16,185,129,.18), transparent 60%),
    linear-gradient(135deg, var(--bg-1) 0%, var(--bg-2) 55%, var(--bg-3) 100%);
}
.loader-core{position:relative;display:flex;flex-direction:column;align-items:center;gap:12px}
.orb{
  width:94px;height:94px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#a78bfa 0%,#4f46e5 45%,#1d1b4a 70%);
  box-shadow:0 0 70px rgba(129,140,248,.7),inset 0 18px 36px rgba(255,255,255,.08);
  animation:pulse 1.6s ease-in-out infinite;
}
.orb-ring{
  width:120px;height:120px;border-radius:50%;
  border:3px solid rgba(255,255,255,.2); border-top-color:#a78bfa;
  position:absolute;top:calc(50% - 60px);left:calc(50% - 60px);
  animation:spin 1.4s linear infinite;
}
.loader-title{font-weight:900;font-size:clamp(22px,6vw,36px);letter-spacing:.6px;background:linear-gradient(90deg,#a5b4fc,#60a5fa,#c4b5fd);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.loader-sub{color:var(--muted);font-size:clamp(12px,2.8vw,14px)}
.progress{width:min(400px,80vw);height:10px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden;border:1px solid rgba(255,255,255,.08)}
.bar{height:100%;width:0%;background:linear-gradient(90deg,#4f46e5,#818cf8);transition:width .15s linear}

/* Анимации */
@keyframes pop{0%{opacity:0;transform:scale(.6)}100%{opacity:1;transform:scale(1)}}
@keyframes fadeUp{0%{opacity:0;transform:translateY(18px)}100%{opacity:1;transform:translateY(0)}}
@keyframes viewIn{to{opacity:1;transform:translateY(0)}}
@keyframes viewOut{to{opacity:0;transform:translateY(10px)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
