# Настройки для веб-приложения ПДД ДУЭЛИ

# Включаем кеширование для статических файлов
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType application/json "access plus 1 hour"
  ExpiresByType text/html "access plus 0 seconds"
</IfModule>

# Включаем gzip сжатие
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# CORS заголовки для JSON файлов (если нужно)
<IfModule mod_headers.c>
  <FilesMatch "\.(json)$">
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, OPTIONS"
  </FilesMatch>
</IfModule>

# Убираем расширение .html из URL (опционально)
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\.]+)$ $1.html [NC,L]

# Защита от прямого доступа к конфигурационным файлам
<FilesMatch "^(\.htaccess|\.git|package\.json|bot\.py|config\.py|auto-edit\.js)$">
  Order allow,deny
  Deny from all
</FilesMatch>

# Устанавливаем правильную кодировку
AddDefaultCharset UTF-8

# MIME типы
AddType application/json .json
AddType image/svg+xml .svg

